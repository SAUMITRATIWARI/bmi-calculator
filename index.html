<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BMI Calculator</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>
  <style>
    input[type=range] { width: 100%; }
    .diet-plan { display: none; }
    #bmiResultCard { display: none; }
  </style>
</head>
<body class="bg-light">
<div class="container my-5" id="pdfContent">
  <h2 class="text-center mb-4">BMI Calculator</h2>

  <div class="row g-3">
    <div class="col-md-6">
      <label class="form-label">Height (cm)</label>
      <input type="range" min="100" max="220" value="170" id="heightRange" oninput="heightInput.value = this.value" />
      <input type="number" id="heightInput" class="form-control mt-1" value="170" oninput="heightRange.value = this.value" />
    </div>
    <div class="col-md-6">
      <label class="form-label">Weight (kg)</label>
      <input type="range" min="30" max="200" value="65" id="weightRange" oninput="weightInput.value = this.value" />
      <input type="number" id="weightInput" class="form-control mt-1" value="65" oninput="weightRange.value = this.value" />
    </div>
  </div>

  <div class="text-center mt-4">
    <button class="btn btn-primary px-4" onclick="calculateBMI()">Calculate</button>
  </div>

  <!-- Result Section -->
<div class="card mt-5 shadow mx-auto" id="bmiResultCard" style="max-width: 350px;">
  <div class="card-body text-center p-3">
    <h5 class="mb-3">Your BMI is <span id="bmiValue" class="text-primary"></span></h5>
    <p class="mb-2">Category: <span id="bmiCategory" class="fw-bold"></span></p>
    
    <div class="mx-auto" style="width:5cm; height:5cm;">
      <canvas id="bmiChart" width="189" height="189" style="width:100%; height:100%;"></canvas>
    </div>
  </div>
</div>


  <!-- Diet Plans -->
  <div class="mt-5">
    <h3 class="text-center">Recommended Diet Plan</h3>

    <div id="underweightPlan" class="diet-plan">
      <h5 class="text-success text-center">For Weight Gain (Underweight)</h5>
      <div class="table-responsive">
        <table class="table table-bordered table-striped">
          <thead class="table-success"><tr><th>Day</th><th>Breakfast</th><th>Lunch</th><th>Snack</th><th>Dinner</th></tr></thead>
          <tbody>
            <tr><td>Mon</td><td>Banana shake + paneer paratha</td><td>Rice + dal + aloo-gobhi + curd</td><td>Peanut chikki + fruit juice</td><td>Palak paneer + chapati + salad</td></tr>
            <tr><td>Tue</td><td>Cheese sandwich + fruit</td><td>Rajma-chawal + cucumber raita</td><td>Banana + roasted peanuts</td><td>Stuffed paratha + ghee + mixed veg</td></tr>
            <tr><td>Wed</td><td>Veg upma + curd + mango</td><td>Chole + rice + salad</td><td>Milk + dry fruits</td><td>Soya curry + chapati + sabzi</td></tr>
            <tr><td>Thu</td><td>Besan chilla + chutney + milk</td><td>Mixed veg pulao + raita</td><td>Banana smoothie + nuts</td><td>Palak corn + chapati + curd</td></tr>
            <tr><td>Fri</td><td>Poha + sprouts + orange juice</td><td>Khichdi + ghee + salad</td><td>Fruit bowl + coconut water</td><td>Aloo matar + chapati + curd</td></tr>
            <tr><td>Sat</td><td>Veg paratha + butter + lassi</td><td>Kadhi + rice + beans</td><td>Milkshake + roasted makhana</td><td>Sambar + idli + chutney</td></tr>
            <tr><td>Sun</td><td>Bread upma + banana + milk</td><td>Paneer bhurji + roti + salad</td><td>Dry fruits + smoothie</td><td>Veg biryani + raita + gulab jamun</td></tr>
          </tbody>
        </table>
      </div>
    </div>

    <div id="overweightPlan" class="diet-plan">
      <h5 class="text-danger text-center">For Weight Loss (Overweight)</h5>
      <div class="table-responsive">
        <table class="table table-bordered table-striped">
          <thead class="table-danger"><tr><th>Day</th><th>Breakfast</th><th>Lunch</th><th>Snack</th><th>Dinner</th></tr></thead>
          <tbody>
            <tr><td>Mon</td><td>Oats porridge + 5 almonds</td><td>Moong dal + roti + sabzi</td><td>Buttermilk + chana</td><td>Veg soup + 1 roti</td></tr>
            <tr><td>Tue</td><td>Sprouts chaat + green tea</td><td>Brown rice + palak dal</td><td>Cucumber sticks + hummus</td><td>Tinda sabzi + 1 roti</td></tr>
            <tr><td>Wed</td><td>Dalia upma + tea</td><td>Roti + chana masala</td><td>Coconut water + peanuts</td><td>Lauki curry + soup</td></tr>
            <tr><td>Thu</td><td>Spinach smoothie</td><td>Quinoa pulao + curd</td><td>Green tea + makhana</td><td>Bhindi + roti</td></tr>
            <tr><td>Fri</td><td>Moong cheela + chutney</td><td>Khichdi + cucumber raita</td><td>Fruit bowl</td><td>Tofu curry + roti</td></tr>
            <tr><td>Sat</td><td>Veg poha + lemon water</td><td>Rajma + roti</td><td>Lemon tea + puffed rice</td><td>Baingan bharta + roti</td></tr>
            <tr><td>Sun</td><td>Idli + sambar</td><td>Dal + rice + sabzi</td><td>Guava + tea</td><td>Veg stew + roti</td></tr>
          </tbody>
        </table>
      </div>
    </div>

    <div id="healthyPlan" class="diet-plan">
      <h5 class="text-info text-center">For Maintenance (Healthy Weight)</h5>
      <div class="table-responsive">
        <table class="table table-bordered table-striped">
          <thead class="table-info"><tr><th>Day</th><th>Breakfast</th><th>Lunch</th><th>Snack</th><th>Dinner</th></tr></thead>
          <tbody>
            <tr><td>Mon</td><td>Multigrain toast + fruit</td><td>Dal + rice + sabzi</td><td>Sprouts + tea</td><td>Roti + sabzi + salad</td></tr>
            <tr><td>Tue</td><td>Besan chilla + chutney</td><td>Veg curry + roti</td><td>Dry fruits + buttermilk</td><td>Soup + toast</td></tr>
            <tr><td>Wed</td><td>Poha + coconut water</td><td>Chole + rice + salad</td><td>Fruit + seeds</td><td>Lauki sabzi + roti</td></tr>
            <tr><td>Thu</td><td>Upma + curd</td><td>Moong dal + chapati</td><td>Herbal tea + peanuts</td><td>Tofu stir fry + roti</td></tr>
            <tr><td>Fri</td><td>Oats + milk + apple</td><td>Veg khichdi + salad</td><td>Smoothie + nuts</td><td>Rajma + roti</td></tr>
            <tr><td>Sat</td><td>Paratha + curd</td><td>Kadhi + rice</td><td>Tea + puffed rice</td><td>Bhindi + roti</td></tr>
            <tr><td>Sun</td><td>Idli + chutney</td><td>Paneer sabzi + chapati</td><td>Lemon water + makhana</td><td>Pulao + raita</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <div class="text-center mt-4">
    <button class="btn btn-success" onclick="downloadPDF()">Download as PDF</button>
  </div>
</div>

<script>
  let chart;
  function calculateBMI() {
    const height = parseFloat(document.getElementById("heightInput").value) / 100;
    const weight = parseFloat(document.getElementById("weightInput").value);
    const bmi = weight / (height * height);

    document.getElementById("bmiValue").innerText = bmi.toFixed(2);
    document.getElementById("bmiResultCard").style.display = "block";

    let category = "";
    if (bmi < 18.5) {
      category = "Underweight";
      showPlan("underweightPlan");
    } else if (bmi < 24.9) {
      category = "Healthy";
      showPlan("healthyPlan");
    } else {
      category = "Overweight";
      showPlan("overweightPlan");
    }
    document.getElementById("bmiCategory").innerText = category;

    if (chart) chart.destroy();
    const ctx = document.getElementById("bmiChart").getContext("2d");
    chart = new Chart(ctx, {
      type: "pie",
      data: {
        labels: ["Fat", "Lean Body Mass"],
        datasets: [{
          data: [bmi > 24.9 ? 35 : bmi < 18.5 ? 10 : 20, 100 - (bmi > 24.9 ? 35 : bmi < 18.5 ? 10 : 20)],
          backgroundColor: ["#dc3545", "#198754"]
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { position: 'bottom' }
        }
      }
    });
  }

  function showPlan(planId) {
    ["underweightPlan", "overweightPlan", "healthyPlan"].forEach(id => {
      document.getElementById(id).style.display = "none";
    });
    document.getElementById(planId).style.display = "block";
  }

  function downloadPDF() {
    const element = document.getElementById("pdfContent");
    html2pdf().from(element).save("BMI_Report.pdf");
  }
</script>
</body>
</html>
